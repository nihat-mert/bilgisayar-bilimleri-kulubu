{% extends 'base.html' %}
{% block title %}Kayıt Ol{% endblock %}
{% block content %}
<section class="card" style="margin-top: 40px; max-width: 400px; margin-left: auto; margin-right: auto;">
  <h2>Kayıt Ol</h2>
  <form class="row" method="post" action="{{ url_for('register') }}">
    <input type="text" name="username" placeholder="Kullanıcı adı (en az 3 karakter)" required minlength="3">
    <input type="email" name="email" placeholder="E-posta adresi" required>
    <input type="password" name="password" placeholder="Şifre (en az 8 karakter, harf ve rakam içermeli)" required minlength="8" id="password-input">
    <div id="password-strength" style="margin-top: 8px; font-size: 12px; color: var(--muted);"></div>
    <button class="btn" type="submit">Kayıt Ol</button>
  </form>
  <div style="margin-top: 16px; padding: 12px; background: rgba(34,211,238,0.1); border-radius: 8px; font-size: 14px;">
    <strong>Not:</strong> Her kullanıcı sadece bir hesap oluşturulabilir.
  </div>
  <p style="text-align: center; margin-top: 16px;">
    <a href="{{ url_for('login') }}" class="btn secondary">Giriş Yap</a>
  </p>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const passwordInput = document.getElementById('password-input');
  const strengthDiv = document.getElementById('password-strength');
  
  passwordInput.addEventListener('input', function() {
    const password = this.value;
    let strength = 0;
    let message = '';
    
    if (password.length >= 8) strength++;
    if (/[A-Za-z]/.test(password)) strength++;
    if (/\d/.test(password)) strength++;
    if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) strength++;
    
    switch(strength) {
      case 0:
      case 1:
        message = 'Çok zayıf';
        strengthDiv.style.color = '#ef4444';
        break;
      case 2:
        message = 'Zayıf';
        strengthDiv.style.color = '#f59e0b';
        break;
      case 3:
        message = 'Orta';
        strengthDiv.style.color = '#eab308';
        break;
      case 4:
        message = 'Güçlü';
        strengthDiv.style.color = '#22c55e';
        break;
    }
    
    strengthDiv.textContent = password ? `Şifre gücü: ${message}` : '';
  });
});
</script>
{% endblock %}
