{% extends 'base.html' %}
{% block title %}Duyuru Düzenle{% endblock %}
{% block content %}
<section class="card" style="margin-top: 20px; max-width: 760px; margin-left:auto; margin-right:auto;">
  <h2>Duyuru Düzenle</h2>
  <form class="row" method="post" action="{{ url_for('edit_announcement', ann_id=item.id) }}">
    <input type="text" name="title" value="{{ item.title }}" required>
    <textarea id="editor" name="content" required>{{ item.content }}</textarea>
    <button class="btn" type="submit">Kaydet</button>
    <a class="btn secondary" href="{{ url_for('admin_announcements') }}">İptal</a>
  </form>
</section>
{% endblock %}

{% block extra_scripts %}
<link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const textarea = document.getElementById('editor');
    if (textarea) {
      const wrapper = document.createElement('div');
      wrapper.id = 'quill-editor';
      wrapper.style.height = '240px';
      textarea.parentNode.insertBefore(wrapper, textarea);
      const quill = new Quill('#quill-editor', { theme: 'snow' });
      quill.root.innerHTML = textarea.value;
      textarea.style.display = 'none';
      textarea.form.addEventListener('submit', () => {
        textarea.value = quill.root.innerHTML;
      });
    }
  });
</script>
{% endblock %}


